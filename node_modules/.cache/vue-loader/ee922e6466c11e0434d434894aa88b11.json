{"remainingRequest":"/Users/yeguofang/www/tp6_vue_10/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yeguofang/www/tp6_vue_10/src/views/search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yeguofang/www/tp6_vue_10/src/views/search.vue","mtime":1578988405000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport header_ from '../components/header_'\nimport search from '../components/search'\nimport footer_ from '../components/footer_'\nimport {sku, categorySearch, lists} from \"../lib/interface\";\n\nexport default {\n    name: \"category\",\n    components: {header_, search, footer_},\n    data() {\n        return {\n            \"text\": \"\",\n            \"orderType\": -1,\n            \"orderNum\": -1,\n            \"orderPrice\": -1,\n\n\n            \"pageSize\": 10,\n            \"pageNum\": 1,\n            \"total\": 0,\n            \"result\": []\n        }\n    },\n    mounted() {\n        $('.to-top').toTop({position: false});\n        this.text = this.$route.query.text;\n        console.log(this.text);\n        this.getResult();\n    },\n    watch: {\n        $route() {\n            this.text = this.$route.query.text;\n            this.getResult();\n        },\n    },\n    methods: {\n        changeOrderNum() {\n            this.orderType = 0;\n            if (this.orderNum === -1) {\n                this.orderNum = 0;\n                $(\"#orderNum\").addClass(\"active\");\n                $(\"#orderNumIcon\").addClass(\"icon-sortUp\");\n                $(\"#orderNumIcon\").removeClass(\"icon-sortDown\");\n            } else if (this.orderNum === 0) {\n                this.orderNum = 1;\n                $(\"#orderNum\").addClass(\"active\");\n                $(\"#orderNumIcon\").removeClass(\"icon-sortUp\");\n                $(\"#orderNumIcon\").addClass(\"icon-sortDown\");\n            } else {\n                this.orderType = -1;\n                this.orderNum = -1;\n                $(\"#orderNum\").removeClass(\"active\");\n                $(\"#orderNumIcon\").removeClass(\"icon-sortUp\");\n                $(\"#orderNumIcon\").removeClass(\"icon-sortDown\");\n            }\n            this.orderPrice = -1;\n            $(\"#orderPrice\").removeClass(\"active\");\n            $(\"#orderPriceIcon\").removeClass(\"icon-sortUp\");\n            $(\"#orderPriceIcon\").removeClass(\"icon-sortDown\");\n            this.getResult();\n        },\n        changeOrderPrice() {\n            this.orderType = 1;\n            if (this.orderPrice === -1) {\n                this.orderPrice = 0;\n                $(\"#orderPrice\").addClass(\"active\");\n                $(\"#orderPriceIcon\").addClass(\"icon-sortUp\");\n                $(\"#orderPriceIcon\").removeClass(\"icon-sortDown\");\n            } else if (this.orderPrice === 0) {\n                this.orderPrice = 1;\n                $(\"#orderPrice\").addClass(\"active\");\n                $(\"#orderPriceIcon\").removeClass(\"icon-sortUp\");\n                $(\"#orderPriceIcon\").addClass(\"icon-sortDown\");\n            } else {\n                this.orderType = -1;\n                this.orderPrice = -1;\n                $(\"#orderPrice\").removeClass(\"active\");\n                $(\"#orderPriceIcon\").removeClass(\"icon-sortUp\");\n                $(\"#orderPriceIcon\").removeClass(\"icon-sortDown\");\n            }\n            this.orderNum = -1;\n            $(\"#orderNum\").removeClass(\"active\");\n            $(\"#orderNumIcon\").removeClass(\"icon-sortUp\");\n            $(\"#orderNumIcon\").removeClass(\"icon-sortDown\");\n            this.getResult();\n        },\n        async pageSizeChange(pageSize) {\n            this.pageSize = pageSize;\n            this.getResult()\n        },\n        changePage(page) {\n            this.pageNum = page;\n            this.getResult()\n        },\n        async getResult() {\n            var skuStr = \"\";\n            if (this.color !== -1) {\n                skuStr += this.color + \",\"\n            }\n            if (this.size !== -1) {\n                skuStr += this.size + \",\"\n            }\n            if (this.price !== -1) {\n                skuStr += this.price + \",\"\n            }\n            skuStr = skuStr.substr(0, skuStr.length - 1);\n            var orderTypeValue = undefined;\n            var orderValue = undefined;\n            if (this.orderType === -1) {\n                orderTypeValue = undefined;\n                orderValue = undefined;\n            } else if (this.orderType === 1) {\n                orderTypeValue = \"price\";\n                if (this.orderPrice === -1) {\n                    orderValue = undefined;\n                } else if (this.orderPrice === 0) {\n                    orderValue = 1\n                } else {\n                    orderValue = 2\n                }\n            } else {\n                orderTypeValue = \"sales_count\";\n                if (this.orderNum === -1) {\n                    orderValue = undefined;\n                } else if (this.orderNum === 0) {\n                    orderValue = 1\n                } else {\n                    orderValue = 2\n                }\n            }\n            var data = {\n                \"page\": this.pageNum,\n                \"page_size\": this.pageSize,\n                \"keyword\": this.text,\n            };\n            if (this.text === undefined || this.text == null) {\n                delete data[\"keyword\"];\n            }\n            if (this.orderType !== -1) {\n                data.field = orderTypeValue;\n            } else {\n                delete (data[\"field\"])\n            }\n            if (this.orderType !== -1) {\n                data.order = orderValue\n            } else {\n                delete [\"order\"]\n            }\n            let result = await lists(data);\n            this.result = result.result.list;\n            this.total = result.result.count;\n        },\n    }\n\n}\n",{"version":3,"sources":["search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"search.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <!-- 顶部tab -->\n        <header_></header_>\n        <!-- 搜索栏 -->\n        <search :text=\"text\"></search>\n        <!-- 内页导航栏 -->\n        <div class=\"top-nav bg3\">\n            <div class=\"nav-box inner\">\n                <div class=\"all-cat\">\n                    <div class=\"title\"><i class=\"iconfont icon-menu\"></i> 全部分类</div>\n                </div>\n                <ul class=\"nva-list\">\n                    <a href=\"/\">\n                        <li>首页</li>\n                    </a>\n                </ul>\n            </div>\n        </div>\n        <div class=\"content inner\">\n            <section class=\"filter-section clearfix\">\n                <ol class=\"breadcrumb\">\n                    <li>首页</li>\n                    <li class=\"active\" v-text=\"'商品搜索'\"></li>\n                    <li class=\"active\" v-text=\"'全部'\" v-if=\"text === ''\"></li>\n                    <li class=\"active\" v-text=\"text\" v-else></li>\n                </ol>\n                <div class=\"sort-box bgf5\">\n                    <div class=\"sort-text\">排序：</div>\n                    <div class=\"sort-text\" id=\"orderNum\" @click=\"changeOrderNum\">销量 <i id=\"orderNumIcon\"\n                                                                                       class=\"iconfont\"></i>\n                    </div>\n                    <div class=\"sort-text\" id=\"orderPrice\" @click=\"changeOrderPrice\">价格 <i id=\"orderPriceIcon\"\n                                                                                           class=\"iconfont\"></i></div>\n                    <div class=\"sort-total pull-right\">共<span v-text=\"total\"></span>个商品</div>\n                </div>\n            </section>\n            <section class=\"item-show__div clearfix\">\n                <div class=\"pull-left\" style=\"width: 1200px;\">\n                    <div class=\"item-list__area clearfix\">\n                        <div class=\"item-card\" v-for=\"(v,k) in result\">\n                            <router-link :to=\"'/detail?id='+v.id\" class=\"photo\">\n                                <img :src=\"v.image\"\n                                     :alt=\"v.title\"\n                                     class=\"cover\">\n                                <div class=\"name\" v-text=\"v.title\"></div>\n                            </router-link>\n                            <div class=\"middle\">\n                                <div class=\"price\">\n                                    <small>￥</small>\n                                    {{v.price}}\n                                </div>\n                                <div class=\"sale\"><a href=\"\">加入购物车</a></div>\n                            </div>\n                            <div class=\"buttom\">\n                                <div>销量 <b v-text=\"v.sales_count\"></b></div>\n                            </div>\n                        </div>\n                    </div>\n                    <!-- 分页 -->\n                    <Page :total=\"total\" :current=\"pageNum\" show-sizer show-total @on-page-size-change=\"pageSizeChange\"\n                          :page-size=\"pageSize\"\n                          @on-change=\"changePage\" style=\"text-align: center;\"></Page>\n                </div>\n            </section>\n        </div>\n        <footer_></footer_>\n    </div>\n</template>\n\n<style>\n    .sort-box .active {\n        color: #b31e22;\n    }\n\n    .item-card {\n        width: 220px;\n    }\n</style>\n<script>\n    import header_ from '../components/header_'\n    import search from '../components/search'\n    import footer_ from '../components/footer_'\n    import {sku, categorySearch, lists} from \"../lib/interface\";\n\n    export default {\n        name: \"category\",\n        components: {header_, search, footer_},\n        data() {\n            return {\n                \"text\": \"\",\n                \"orderType\": -1,\n                \"orderNum\": -1,\n                \"orderPrice\": -1,\n\n\n                \"pageSize\": 10,\n                \"pageNum\": 1,\n                \"total\": 0,\n                \"result\": []\n            }\n        },\n        mounted() {\n            $('.to-top').toTop({position: false});\n            this.text = this.$route.query.text;\n            console.log(this.text);\n            this.getResult();\n        },\n        watch: {\n            $route() {\n                this.text = this.$route.query.text;\n                this.getResult();\n            },\n        },\n        methods: {\n            changeOrderNum() {\n                this.orderType = 0;\n                if (this.orderNum === -1) {\n                    this.orderNum = 0;\n                    $(\"#orderNum\").addClass(\"active\");\n                    $(\"#orderNumIcon\").addClass(\"icon-sortUp\");\n                    $(\"#orderNumIcon\").removeClass(\"icon-sortDown\");\n                } else if (this.orderNum === 0) {\n                    this.orderNum = 1;\n                    $(\"#orderNum\").addClass(\"active\");\n                    $(\"#orderNumIcon\").removeClass(\"icon-sortUp\");\n                    $(\"#orderNumIcon\").addClass(\"icon-sortDown\");\n                } else {\n                    this.orderType = -1;\n                    this.orderNum = -1;\n                    $(\"#orderNum\").removeClass(\"active\");\n                    $(\"#orderNumIcon\").removeClass(\"icon-sortUp\");\n                    $(\"#orderNumIcon\").removeClass(\"icon-sortDown\");\n                }\n                this.orderPrice = -1;\n                $(\"#orderPrice\").removeClass(\"active\");\n                $(\"#orderPriceIcon\").removeClass(\"icon-sortUp\");\n                $(\"#orderPriceIcon\").removeClass(\"icon-sortDown\");\n                this.getResult();\n            },\n            changeOrderPrice() {\n                this.orderType = 1;\n                if (this.orderPrice === -1) {\n                    this.orderPrice = 0;\n                    $(\"#orderPrice\").addClass(\"active\");\n                    $(\"#orderPriceIcon\").addClass(\"icon-sortUp\");\n                    $(\"#orderPriceIcon\").removeClass(\"icon-sortDown\");\n                } else if (this.orderPrice === 0) {\n                    this.orderPrice = 1;\n                    $(\"#orderPrice\").addClass(\"active\");\n                    $(\"#orderPriceIcon\").removeClass(\"icon-sortUp\");\n                    $(\"#orderPriceIcon\").addClass(\"icon-sortDown\");\n                } else {\n                    this.orderType = -1;\n                    this.orderPrice = -1;\n                    $(\"#orderPrice\").removeClass(\"active\");\n                    $(\"#orderPriceIcon\").removeClass(\"icon-sortUp\");\n                    $(\"#orderPriceIcon\").removeClass(\"icon-sortDown\");\n                }\n                this.orderNum = -1;\n                $(\"#orderNum\").removeClass(\"active\");\n                $(\"#orderNumIcon\").removeClass(\"icon-sortUp\");\n                $(\"#orderNumIcon\").removeClass(\"icon-sortDown\");\n                this.getResult();\n            },\n            async pageSizeChange(pageSize) {\n                this.pageSize = pageSize;\n                this.getResult()\n            },\n            changePage(page) {\n                this.pageNum = page;\n                this.getResult()\n            },\n            async getResult() {\n                var skuStr = \"\";\n                if (this.color !== -1) {\n                    skuStr += this.color + \",\"\n                }\n                if (this.size !== -1) {\n                    skuStr += this.size + \",\"\n                }\n                if (this.price !== -1) {\n                    skuStr += this.price + \",\"\n                }\n                skuStr = skuStr.substr(0, skuStr.length - 1);\n                var orderTypeValue = undefined;\n                var orderValue = undefined;\n                if (this.orderType === -1) {\n                    orderTypeValue = undefined;\n                    orderValue = undefined;\n                } else if (this.orderType === 1) {\n                    orderTypeValue = \"price\";\n                    if (this.orderPrice === -1) {\n                        orderValue = undefined;\n                    } else if (this.orderPrice === 0) {\n                        orderValue = 1\n                    } else {\n                        orderValue = 2\n                    }\n                } else {\n                    orderTypeValue = \"sales_count\";\n                    if (this.orderNum === -1) {\n                        orderValue = undefined;\n                    } else if (this.orderNum === 0) {\n                        orderValue = 1\n                    } else {\n                        orderValue = 2\n                    }\n                }\n                var data = {\n                    \"page\": this.pageNum,\n                    \"page_size\": this.pageSize,\n                    \"keyword\": this.text,\n                };\n                if (this.text === undefined || this.text == null) {\n                    delete data[\"keyword\"];\n                }\n                if (this.orderType !== -1) {\n                    data.field = orderTypeValue;\n                } else {\n                    delete (data[\"field\"])\n                }\n                if (this.orderType !== -1) {\n                    data.order = orderValue\n                } else {\n                    delete [\"order\"]\n                }\n                let result = await lists(data);\n                this.result = result.result.list;\n                this.total = result.result.count;\n            },\n        }\n\n    }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}