{"remainingRequest":"/Users/yeguofang/www/tp6_vue_10/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yeguofang/www/tp6_vue_10/src/views/detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yeguofang/www/tp6_vue_10/src/views/detail.vue","mtime":1581247206000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport \"@/assets/js/jquery.zoom.js\"\nimport \"@/assets/js/jquery.magnifier.js\"\nimport \"@/assets/js/jquery.magnifier.js\"\nimport \"@/assets/js/jquery.zoom.js\"\nimport header_ from '../components/header_'\nimport search from '../components/search'\nimport footer_ from '../components/footer_'\nimport {detail, recommend, addCart} from \"../lib/interface\";\n\nexport default {\n    components: {header_, search, footer_},\n    name: \"detail\",\n    data() {\n        return {\n            id: 0,\n            result: {},\n            recommend: [],\n            firstImg: \"\",\n        }\n    },\n    watch: {\n        $route() {\n            this.id = this.$route.query.id;\n            this.getResult();\n        },\n    },\n    mounted() {\n        this.id = this.$route.query.id;\n        this.getResult();\n        this.getRecommendInfo();\n\n        $('#descCate').smartFloat(0);\n        $('.dc-idsItem').click(function () {\n            $(this).addClass('selected').siblings().removeClass('selected');\n        });\n        $('#item-tabs a[data-toggle=\"tab\"]').on('show.bs.tab', function (e) {\n            $('#descCate #' + $(e.target).attr('aria-controls') + '-tab')\n                .addClass('in').addClass('active').siblings()\n                .removeClass('in').removeClass('active');\n        });\n        $('#magnifier').magnifier();\n        $('.vip-price-panel').click(function () {\n            if ($(this).hasClass('active')) {\n                $('.all-price__box').stop().slideUp('normal', function () {\n                    $('.vip-price-panel').removeClass('active').find('.iconfont').removeClass('icon-up').addClass('icon-down');\n                });\n            } else {\n                $(this).addClass('active').find('.iconfont').removeClass('icon-down').addClass('icon-up');\n                $('.all-price__box').stop().slideDown('normal');\n            }\n        });\n        $('.amount-input').onlyReg({reg: /[^0-9]/g});\n        var that = this;\n        $('.amount-widget').on('click', '.amount-but', function () {\n            var num = parseInt($('.amount-input').val());\n            if (!num) num = 0;\n            if ($(this).hasClass('add')) {\n                if (num > that.result.stock - 1) {\n                    return DJMask.open({\n                        width: \"300px\",\n                        height: \"100px\",\n                        content: \"您输入的数量超过库存上限\"\n                    });\n                }\n                $('.amount-input').val(num + 1);\n            } else if ($(this).hasClass('sub')) {\n                if (num == 1) {\n                    return DJMask.open({\n                        width: \"300px\",\n                        height: \"100px\",\n                        content: \"您输入的数量有误\"\n                    });\n                }\n                $('.amount-input').val(num - 1);\n            }\n        });\n    },\n    methods: {\n        async getResult() {\n            let result = await detail({\"id\": this.id});\n            this.result = result.result;\n            if (result.status === 0) {\n                this.$router.replace(\"/\");\n                return;\n            }\n            this.firstImg = this.result.image[0];\n        },\n        async chooseSku(k, k1) {\n            $(\".sku_\" + k).removeClass(\"on\");\n            $(\"#sku_\" + k + \"_\" + k1).addClass(\"on\");\n            var ids = \"\";\n            $(\".sku\").each(function (item) {\n                if ($(this).hasClass(\"on\")) {\n                    ids += $(this).attr(\"data-value\") + \",\";\n                }\n            })\n            ids = ids.substr(0, ids.length - 1);\n            var id = 0;\n            for (k in this.result.gids) {\n                if (k === ids) {\n                    id = this.result.gids[k];\n                }\n            }\n            this.id = id;\n            this.getResult();\n        },\n        async addCart() {\n            var token = localStorage.getItem(\"token\");\n            if (token === undefined || token === null) {\n                this.$router.replace({\n                    name: \"login\",\n                    query: {redirect: this.$route.fullPath}\n                });\n                return;\n            }\n            var num = parseInt($('.amount-input').val());\n            if (num > this.result.stock) {\n                this.$Message.error(\"超出最大库存！\");\n                $('.amount-input').val(0);\n                return;\n            }\n            let result = await addCart({\"id\": this.id, \"num\": num});\n            this.$Message.success(result.message);\n        },\n        async getRecommendInfo() {\n            let result = await recommend();\n            this.recommend = result.result;\n        },\n        changeImg(img) {\n            this.firstImg = img;\n        }\n    }\n}\n",{"version":3,"sources":["detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"detail.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <!-- 顶部tab -->\n        <header_></header_>\n        <!-- 搜索栏 -->\n        <search></search>\n        <!-- 内页导航栏 -->\n        <div class=\"top-nav bg3\">\n            <div class=\"nav-box inner\">\n                <div class=\"all-cat\">\n                    <div class=\"title\"><i class=\"iconfont icon-menu\"></i> 全部分类</div>\n                </div>\n                <ul class=\"nva-list\">\n                    <a href=\"/\">\n                        <li>首页</li>\n                    </a>\n                </ul>\n            </div>\n        </div>\n        <div class=\"content inner\">\n            <section class=\"item-show__div item-show__head clearfix\">\n                <div class=\"pull-left\">\n                    <ol class=\"breadcrumb\">\n                        <li><a href=\"/\">首页</a></li>\n                        <li>\n                            商品详情\n                        </li>\n                        <li class=\"active\" v-text=\"result.title\"></li>\n                    </ol>\n                    <div class=\"item-pic__box\" id=\"magnifier\">\n                        <div class=\"small-box\">\n                            <img class=\"cover\" :src=\"firstImg\">\n                            <span class=\"hover\"></span>\n                        </div>\n                        <div class=\"thumbnail-box\">\n                            <div class=\"thumb-list\">\n                                <ul class=\"wrapper clearfix\">\n                                    <li v-for=\"(v,index) in result.image\" @click=\"changeImg(v)\" :key=\"index\"\n                                        class=\"item\" :data-src=\"v\"><img class=\"cover\" :src=\"v\"></li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"item-info__box\">\n                        <div class=\"item-title\">\n                            <div class=\"name ep2\" v-text=\"result.title\"></div>\n                        </div>\n                        <div class=\"item-price bgf5\">\n                            <div class=\"price-box clearfix\">\n                                <div class=\"price-panel pull-left\">\n                                    售价：<span class=\"price\">￥<span v-text=\"result.price\"></span> <s\n                                        class=\"fz16 c9\">￥<span v-text=\"result.cost_price\"></span></s></span>\n                                </div>\n                            </div>\n                        </div>\n                        <ul class=\"item-ind-panel clearfix\">\n                            <li class=\"item-ind-item\">\n                                <span class=\"ind-label c9\">累计销量</span>\n                                <span class=\"ind-count cr\" v-text=\"result.sales_count\"></span>\n                            </li>\n                        </ul>\n                        <div class=\"item-key\">\n                            <div class=\"item-sku\">\n                                <dl class=\"item-prop clearfix\" v-for=\"(v,k) in result.sku\">\n                                    <dt class=\"item-metatit\"><span v-text=\"v.name\"></span>：</dt>\n                                    <dd>\n                                        <ul :data-property=\"v.name\" class=\"clearfix\">\n                                            <li v-for=\"(v1,k1) in v.list\">\n                                                <a @click=\"chooseSku(k,k1)\" v-if=\"v1.flag == 1\" :class=\"'sku on sku_'+k\"\n                                                   :id=\"'sku_'+k+'_'+k1\"\n                                                   role=\"button\"\n                                                   :data-value=\"v1.id\"\n                                                   aria-disabled=\"true\">\n                                                    <span v-text=\"v1.name\"></span>\n                                                </a>\n                                                <a @click=\"chooseSku(k,k1)\" v-if=\"v1.flag == 0\" :class=\"'sku sku_'+k\"\n                                                   :id=\"'sku_'+k+'_'+k1\"\n                                                   role=\"button\" :data-value=\"v1.id\"\n                                                   aria-disabled=\"true\">\n                                                    <span v-text=\"v1.name\"></span>\n                                                </a>\n                                            </li>\n                                        </ul>\n                                    </dd>\n                                </dl>\n                            </div>\n                            <div class=\"item-amount clearfix bgf5\">\n                                <div class=\"item-metatit\">数量：</div>\n                                <div class=\"amount-box\">\n                                    <div class=\"amount-widget\">\n                                        <input class=\"amount-input\" value=\"1\" maxlength=\"8\" title=\"请输入购买量\" type=\"text\">\n                                        <div class=\"amount-btn\">\n                                            <a class=\"amount-but add\"></a>\n                                            <a class=\"amount-but sub\"></a>\n                                        </div>\n                                    </div>\n                                    <div class=\"item-stock\"><span style=\"margin-left: 10px;\">库存\n                                        <b id=\"Stock\" v-text=\"result.stock\"></b> 件</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"item-action clearfix bgf5\">\n                                <a v-if=\"result.stock <= 0\" disabled=\"disabled\"\n                                   style=\"float: left;background: gray;border: gray\" rel=\"nofollow\"\n                                   data-addfastbuy=\"true\" role=\"button\"\n                                   class=\"item-action__basket\">\n                                    <i class=\"iconfont icon-shopcart\"></i> 加入购物车\n                                </a>\n                                <a v-else @click=\"addCart\"\n                                   style=\"float: left;\" rel=\"nofollow\"\n                                   data-addfastbuy=\"true\" role=\"button\"\n                                   class=\"item-action__basket\">\n                                    <i class=\"iconfont icon-shopcart\"></i> 加入购物车\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"pull-right picked-div\">\n                    <div class=\"lace-title\">\n                        <span class=\"c6\">爆款推荐</span>\n                    </div>\n                    <div class=\"swiper-container picked-swiper\">\n                        <div class=\"swiper-wrapper\">\n                            <div class=\"swiper-slide\">\n                                <router-link class=\"picked-item\" :to=\"'/detail?id='+v.id\" v-for=\"(v,k) in recommend\">\n                                    <img :src=\"v.image\" alt=\"\" class=\"cover\">\n                                    <div class=\"look_price\">¥<span v-text=\"v.price\"></span></div>\n                                </router-link>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </section>\n            <section class=\"item-show__div item-show__body posr clearfix\">\n                <div class=\"item-nav-tabs\">\n                    <ul class=\"nav-tabs nav-pills clearfix\" role=\"tablist\" id=\"item-tabs\">\n                        <li role=\"presentation\" class=\"active\"><a href=\"#detail\" role=\"tab\" data-toggle=\"tab\"\n                                                                  aria-controls=\"detail\" aria-expanded=\"true\">商品详情</a>\n                        </li>\n                    </ul>\n                </div>\n                <div class=\"pull-left\">\n                    <div class=\"tab-content\">\n                        <div role=\"tabpanel\" class=\"tab-pane fade in active\" id=\"detail\" aria-labelledby=\"detail-tab\">\n                            <div class=\"item-detail__info clearfix\">\n                                <div class=\"record\">商品编号：<span v-if=\"result && result.detail\"\n                                                               v-text=\"result.detail.d1.商品编号\"></span>\n                                </div>\n                                <div class=\"record\">上架时间：<span v-if=\"result && result.detail\"\n                                                               v-text=\"result.detail.d1.上架时间\"></span>\n                                </div>\n                                <div class=\"record\">商品毛重：<span v-if=\"result && result.detail\"\n                                                               v-text=\"result.detail.d1.商品毛重\"></span>\n                                </div>\n                                <div class=\"record\">商品库存：<span v-if=\"result && result.detail\"\n                                                               v-text=\"result.detail.d1.商品库存\"></span>\n                                </div>\n                            </div>\n                            <div class=\"rich-text\">\n                                <p style=\"text-align: center;\" v-if=\"result && result.detail\"\n                                   v-html=\"result.detail.d2\"></p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"pull-right\">\n                    <div class=\"tab-content\" id=\"descCate\">\n                        <div role=\"tabpanel\" class=\"tab-pane fade in active\" id=\"detail-tab\"\n                             aria-labelledby=\"detail-tab\">\n                            <div class=\"descCate-content bgf5\">\n                                <dd class=\"dc-idsItem selected\">\n                                    <a href=\"#desc-module-1\"><i class=\"iconfont icon-dot\"></i> 产品图</a>\n                                </dd>\n                                <dd class=\"dc-idsItem\">\n                                    <a href=\"#desc-module-2\"><i class=\"iconfont icon-selected\"></i> 细节图</a>\n                                </dd>\n                                <dd class=\"dc-idsItem\">\n                                    <a href=\"#desc-module-3\"><i class=\"iconfont\"></i> 尺寸及试穿</a>\n                                </dd>\n                                <dd class=\"dc-idsItem\">\n                                    <a href=\"#desc-module-4\"><i class=\"iconfont\"></i> 模特效果图</a>\n                                </dd>\n                                <dd class=\"dc-idsItem\">\n                                    <a href=\"#desc-module-5\"><i class=\"iconfont\"></i> 常见问题</a>\n                                </dd>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </section>\n        </div>\n        <footer_></footer_>\n    </div>\n</template>\n<script>\n    import \"@/assets/js/jquery.zoom.js\"\n    import \"@/assets/js/jquery.magnifier.js\"\n    import \"@/assets/js/jquery.magnifier.js\"\n    import \"@/assets/js/jquery.zoom.js\"\n    import header_ from '../components/header_'\n    import search from '../components/search'\n    import footer_ from '../components/footer_'\n    import {detail, recommend, addCart} from \"../lib/interface\";\n\n    export default {\n        components: {header_, search, footer_},\n        name: \"detail\",\n        data() {\n            return {\n                id: 0,\n                result: {},\n                recommend: [],\n                firstImg: \"\",\n            }\n        },\n        watch: {\n            $route() {\n                this.id = this.$route.query.id;\n                this.getResult();\n            },\n        },\n        mounted() {\n            this.id = this.$route.query.id;\n            this.getResult();\n            this.getRecommendInfo();\n\n            $('#descCate').smartFloat(0);\n            $('.dc-idsItem').click(function () {\n                $(this).addClass('selected').siblings().removeClass('selected');\n            });\n            $('#item-tabs a[data-toggle=\"tab\"]').on('show.bs.tab', function (e) {\n                $('#descCate #' + $(e.target).attr('aria-controls') + '-tab')\n                    .addClass('in').addClass('active').siblings()\n                    .removeClass('in').removeClass('active');\n            });\n            $('#magnifier').magnifier();\n            $('.vip-price-panel').click(function () {\n                if ($(this).hasClass('active')) {\n                    $('.all-price__box').stop().slideUp('normal', function () {\n                        $('.vip-price-panel').removeClass('active').find('.iconfont').removeClass('icon-up').addClass('icon-down');\n                    });\n                } else {\n                    $(this).addClass('active').find('.iconfont').removeClass('icon-down').addClass('icon-up');\n                    $('.all-price__box').stop().slideDown('normal');\n                }\n            });\n            $('.amount-input').onlyReg({reg: /[^0-9]/g});\n            var that = this;\n            $('.amount-widget').on('click', '.amount-but', function () {\n                var num = parseInt($('.amount-input').val());\n                if (!num) num = 0;\n                if ($(this).hasClass('add')) {\n                    if (num > that.result.stock - 1) {\n                        return DJMask.open({\n                            width: \"300px\",\n                            height: \"100px\",\n                            content: \"您输入的数量超过库存上限\"\n                        });\n                    }\n                    $('.amount-input').val(num + 1);\n                } else if ($(this).hasClass('sub')) {\n                    if (num == 1) {\n                        return DJMask.open({\n                            width: \"300px\",\n                            height: \"100px\",\n                            content: \"您输入的数量有误\"\n                        });\n                    }\n                    $('.amount-input').val(num - 1);\n                }\n            });\n        },\n        methods: {\n            async getResult() {\n                let result = await detail({\"id\": this.id});\n                this.result = result.result;\n                if (result.status === 0) {\n                    this.$router.replace(\"/\");\n                    return;\n                }\n                this.firstImg = this.result.image[0];\n            },\n            async chooseSku(k, k1) {\n                $(\".sku_\" + k).removeClass(\"on\");\n                $(\"#sku_\" + k + \"_\" + k1).addClass(\"on\");\n                var ids = \"\";\n                $(\".sku\").each(function (item) {\n                    if ($(this).hasClass(\"on\")) {\n                        ids += $(this).attr(\"data-value\") + \",\";\n                    }\n                })\n                ids = ids.substr(0, ids.length - 1);\n                var id = 0;\n                for (k in this.result.gids) {\n                    if (k === ids) {\n                        id = this.result.gids[k];\n                    }\n                }\n                this.id = id;\n                this.getResult();\n            },\n            async addCart() {\n                var token = localStorage.getItem(\"token\");\n                if (token === undefined || token === null) {\n                    this.$router.replace({\n                        name: \"login\",\n                        query: {redirect: this.$route.fullPath}\n                    });\n                    return;\n                }\n                var num = parseInt($('.amount-input').val());\n                if (num > this.result.stock) {\n                    this.$Message.error(\"超出最大库存！\");\n                    $('.amount-input').val(0);\n                    return;\n                }\n                let result = await addCart({\"id\": this.id, \"num\": num});\n                this.$Message.success(result.message);\n            },\n            async getRecommendInfo() {\n                let result = await recommend();\n                this.recommend = result.result;\n            },\n            changeImg(img) {\n                this.firstImg = img;\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}