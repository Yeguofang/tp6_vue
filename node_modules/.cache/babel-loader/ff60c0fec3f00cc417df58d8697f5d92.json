{"remainingRequest":"/Users/yeguofang/www/tp6_vue_10/node_modules/babel-loader/lib/index.js!/Users/yeguofang/www/tp6_vue_10/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yeguofang/www/tp6_vue_10/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yeguofang/www/tp6_vue_10/src/views/detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yeguofang/www/tp6_vue_10/src/views/detail.vue","mtime":1581247206000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/yeguofang/www/tp6_vue_10/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.array.find\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport \"@/assets/js/jquery.zoom.js\";\nimport \"@/assets/js/jquery.magnifier.js\";\nimport \"@/assets/js/jquery.magnifier.js\";\nimport \"@/assets/js/jquery.zoom.js\";\nimport header_ from \"../components/header_\";\nimport search from \"../components/search\";\nimport footer_ from \"../components/footer_\";\nimport { detail, recommend, addCart as _addCart } from \"../lib/interface\";\nexport default {\n  components: {\n    header_: header_,\n    search: search,\n    footer_: footer_\n  },\n  name: \"detail\",\n  data: function data() {\n    return {\n      id: 0,\n      result: {},\n      recommend: [],\n      firstImg: \"\"\n    };\n  },\n  watch: {\n    $route: function $route() {\n      this.id = this.$route.query.id;\n      this.getResult();\n    }\n  },\n  mounted: function mounted() {\n    this.id = this.$route.query.id;\n    this.getResult();\n    this.getRecommendInfo();\n    $('#descCate').smartFloat(0);\n    $('.dc-idsItem').click(function () {\n      $(this).addClass('selected').siblings().removeClass('selected');\n    });\n    $('#item-tabs a[data-toggle=\"tab\"]').on('show.bs.tab', function (e) {\n      $('#descCate #' + $(e.target).attr('aria-controls') + '-tab').addClass('in').addClass('active').siblings().removeClass('in').removeClass('active');\n    });\n    $('#magnifier').magnifier();\n    $('.vip-price-panel').click(function () {\n      if ($(this).hasClass('active')) {\n        $('.all-price__box').stop().slideUp('normal', function () {\n          $('.vip-price-panel').removeClass('active').find('.iconfont').removeClass('icon-up').addClass('icon-down');\n        });\n      } else {\n        $(this).addClass('active').find('.iconfont').removeClass('icon-down').addClass('icon-up');\n        $('.all-price__box').stop().slideDown('normal');\n      }\n    });\n    $('.amount-input').onlyReg({\n      reg: /[^0-9]/g\n    });\n    var that = this;\n    $('.amount-widget').on('click', '.amount-but', function () {\n      var num = parseInt($('.amount-input').val());\n      if (!num) num = 0;\n\n      if ($(this).hasClass('add')) {\n        if (num > that.result.stock - 1) {\n          return DJMask.open({\n            width: \"300px\",\n            height: \"100px\",\n            content: \"您输入的数量超过库存上限\"\n          });\n        }\n\n        $('.amount-input').val(num + 1);\n      } else if ($(this).hasClass('sub')) {\n        if (num == 1) {\n          return DJMask.open({\n            width: \"300px\",\n            height: \"100px\",\n            content: \"您输入的数量有误\"\n          });\n        }\n\n        $('.amount-input').val(num - 1);\n      }\n    });\n  },\n  methods: {\n    getResult: function () {\n      var _getResult = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return detail({\n                  \"id\": this.id\n                });\n\n              case 2:\n                result = _context.sent;\n                this.result = result.result;\n\n                if (!(result.status === 0)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                this.$router.replace(\"/\");\n                return _context.abrupt(\"return\");\n\n              case 7:\n                this.firstImg = this.result.image[0];\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getResult() {\n        return _getResult.apply(this, arguments);\n      }\n\n      return getResult;\n    }(),\n    chooseSku: function () {\n      var _chooseSku = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(k, k1) {\n        var ids, id;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                $(\".sku_\" + k).removeClass(\"on\");\n                $(\"#sku_\" + k + \"_\" + k1).addClass(\"on\");\n                ids = \"\";\n                $(\".sku\").each(function (item) {\n                  if ($(this).hasClass(\"on\")) {\n                    ids += $(this).attr(\"data-value\") + \",\";\n                  }\n                });\n                ids = ids.substr(0, ids.length - 1);\n                id = 0;\n\n                for (k in this.result.gids) {\n                  if (k === ids) {\n                    id = this.result.gids[k];\n                  }\n                }\n\n                this.id = id;\n                this.getResult();\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function chooseSku(_x, _x2) {\n        return _chooseSku.apply(this, arguments);\n      }\n\n      return chooseSku;\n    }(),\n    addCart: function () {\n      var _addCart2 = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var token, num, result;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                token = localStorage.getItem(\"token\");\n\n                if (!(token === undefined || token === null)) {\n                  _context3.next = 4;\n                  break;\n                }\n\n                this.$router.replace({\n                  name: \"login\",\n                  query: {\n                    redirect: this.$route.fullPath\n                  }\n                });\n                return _context3.abrupt(\"return\");\n\n              case 4:\n                num = parseInt($('.amount-input').val());\n\n                if (!(num > this.result.stock)) {\n                  _context3.next = 9;\n                  break;\n                }\n\n                this.$Message.error(\"超出最大库存！\");\n                $('.amount-input').val(0);\n                return _context3.abrupt(\"return\");\n\n              case 9:\n                _context3.next = 11;\n                return _addCart({\n                  \"id\": this.id,\n                  \"num\": num\n                });\n\n              case 11:\n                result = _context3.sent;\n                this.$Message.success(result.message);\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function addCart() {\n        return _addCart2.apply(this, arguments);\n      }\n\n      return addCart;\n    }(),\n    getRecommendInfo: function () {\n      var _getRecommendInfo = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4() {\n        var result;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return recommend();\n\n              case 2:\n                result = _context4.sent;\n                this.recommend = result.result;\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getRecommendInfo() {\n        return _getRecommendInfo.apply(this, arguments);\n      }\n\n      return getRecommendInfo;\n    }(),\n    changeImg: function changeImg(img) {\n      this.firstImg = img;\n    }\n  }\n};",{"version":3,"sources":["detail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <!-- 顶部tab -->\n        <header_></header_>\n        <!-- 搜索栏 -->\n        <search></search>\n        <!-- 内页导航栏 -->\n        <div class=\"top-nav bg3\">\n            <div class=\"nav-box inner\">\n                <div class=\"all-cat\">\n                    <div class=\"title\"><i class=\"iconfont icon-menu\"></i> 全部分类</div>\n                </div>\n                <ul class=\"nva-list\">\n                    <a href=\"/\">\n                        <li>首页</li>\n                    </a>\n                </ul>\n            </div>\n        </div>\n        <div class=\"content inner\">\n            <section class=\"item-show__div item-show__head clearfix\">\n                <div class=\"pull-left\">\n                    <ol class=\"breadcrumb\">\n                        <li><a href=\"/\">首页</a></li>\n                        <li>\n                            商品详情\n                        </li>\n                        <li class=\"active\" v-text=\"result.title\"></li>\n                    </ol>\n                    <div class=\"item-pic__box\" id=\"magnifier\">\n                        <div class=\"small-box\">\n                            <img class=\"cover\" :src=\"firstImg\">\n                            <span class=\"hover\"></span>\n                        </div>\n                        <div class=\"thumbnail-box\">\n                            <div class=\"thumb-list\">\n                                <ul class=\"wrapper clearfix\">\n                                    <li v-for=\"(v,index) in result.image\" @click=\"changeImg(v)\" :key=\"index\"\n                                        class=\"item\" :data-src=\"v\"><img class=\"cover\" :src=\"v\"></li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"item-info__box\">\n                        <div class=\"item-title\">\n                            <div class=\"name ep2\" v-text=\"result.title\"></div>\n                        </div>\n                        <div class=\"item-price bgf5\">\n                            <div class=\"price-box clearfix\">\n                                <div class=\"price-panel pull-left\">\n                                    售价：<span class=\"price\">￥<span v-text=\"result.price\"></span> <s\n                                        class=\"fz16 c9\">￥<span v-text=\"result.cost_price\"></span></s></span>\n                                </div>\n                            </div>\n                        </div>\n                        <ul class=\"item-ind-panel clearfix\">\n                            <li class=\"item-ind-item\">\n                                <span class=\"ind-label c9\">累计销量</span>\n                                <span class=\"ind-count cr\" v-text=\"result.sales_count\"></span>\n                            </li>\n                        </ul>\n                        <div class=\"item-key\">\n                            <div class=\"item-sku\">\n                                <dl class=\"item-prop clearfix\" v-for=\"(v,k) in result.sku\">\n                                    <dt class=\"item-metatit\"><span v-text=\"v.name\"></span>：</dt>\n                                    <dd>\n                                        <ul :data-property=\"v.name\" class=\"clearfix\">\n                                            <li v-for=\"(v1,k1) in v.list\">\n                                                <a @click=\"chooseSku(k,k1)\" v-if=\"v1.flag == 1\" :class=\"'sku on sku_'+k\"\n                                                   :id=\"'sku_'+k+'_'+k1\"\n                                                   role=\"button\"\n                                                   :data-value=\"v1.id\"\n                                                   aria-disabled=\"true\">\n                                                    <span v-text=\"v1.name\"></span>\n                                                </a>\n                                                <a @click=\"chooseSku(k,k1)\" v-if=\"v1.flag == 0\" :class=\"'sku sku_'+k\"\n                                                   :id=\"'sku_'+k+'_'+k1\"\n                                                   role=\"button\" :data-value=\"v1.id\"\n                                                   aria-disabled=\"true\">\n                                                    <span v-text=\"v1.name\"></span>\n                                                </a>\n                                            </li>\n                                        </ul>\n                                    </dd>\n                                </dl>\n                            </div>\n                            <div class=\"item-amount clearfix bgf5\">\n                                <div class=\"item-metatit\">数量：</div>\n                                <div class=\"amount-box\">\n                                    <div class=\"amount-widget\">\n                                        <input class=\"amount-input\" value=\"1\" maxlength=\"8\" title=\"请输入购买量\" type=\"text\">\n                                        <div class=\"amount-btn\">\n                                            <a class=\"amount-but add\"></a>\n                                            <a class=\"amount-but sub\"></a>\n                                        </div>\n                                    </div>\n                                    <div class=\"item-stock\"><span style=\"margin-left: 10px;\">库存\n                                        <b id=\"Stock\" v-text=\"result.stock\"></b> 件</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"item-action clearfix bgf5\">\n                                <a v-if=\"result.stock <= 0\" disabled=\"disabled\"\n                                   style=\"float: left;background: gray;border: gray\" rel=\"nofollow\"\n                                   data-addfastbuy=\"true\" role=\"button\"\n                                   class=\"item-action__basket\">\n                                    <i class=\"iconfont icon-shopcart\"></i> 加入购物车\n                                </a>\n                                <a v-else @click=\"addCart\"\n                                   style=\"float: left;\" rel=\"nofollow\"\n                                   data-addfastbuy=\"true\" role=\"button\"\n                                   class=\"item-action__basket\">\n                                    <i class=\"iconfont icon-shopcart\"></i> 加入购物车\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"pull-right picked-div\">\n                    <div class=\"lace-title\">\n                        <span class=\"c6\">爆款推荐</span>\n                    </div>\n                    <div class=\"swiper-container picked-swiper\">\n                        <div class=\"swiper-wrapper\">\n                            <div class=\"swiper-slide\">\n                                <router-link class=\"picked-item\" :to=\"'/detail?id='+v.id\" v-for=\"(v,k) in recommend\">\n                                    <img :src=\"v.image\" alt=\"\" class=\"cover\">\n                                    <div class=\"look_price\">¥<span v-text=\"v.price\"></span></div>\n                                </router-link>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </section>\n            <section class=\"item-show__div item-show__body posr clearfix\">\n                <div class=\"item-nav-tabs\">\n                    <ul class=\"nav-tabs nav-pills clearfix\" role=\"tablist\" id=\"item-tabs\">\n                        <li role=\"presentation\" class=\"active\"><a href=\"#detail\" role=\"tab\" data-toggle=\"tab\"\n                                                                  aria-controls=\"detail\" aria-expanded=\"true\">商品详情</a>\n                        </li>\n                    </ul>\n                </div>\n                <div class=\"pull-left\">\n                    <div class=\"tab-content\">\n                        <div role=\"tabpanel\" class=\"tab-pane fade in active\" id=\"detail\" aria-labelledby=\"detail-tab\">\n                            <div class=\"item-detail__info clearfix\">\n                                <div class=\"record\">商品编号：<span v-if=\"result && result.detail\"\n                                                               v-text=\"result.detail.d1.商品编号\"></span>\n                                </div>\n                                <div class=\"record\">上架时间：<span v-if=\"result && result.detail\"\n                                                               v-text=\"result.detail.d1.上架时间\"></span>\n                                </div>\n                                <div class=\"record\">商品毛重：<span v-if=\"result && result.detail\"\n                                                               v-text=\"result.detail.d1.商品毛重\"></span>\n                                </div>\n                                <div class=\"record\">商品库存：<span v-if=\"result && result.detail\"\n                                                               v-text=\"result.detail.d1.商品库存\"></span>\n                                </div>\n                            </div>\n                            <div class=\"rich-text\">\n                                <p style=\"text-align: center;\" v-if=\"result && result.detail\"\n                                   v-html=\"result.detail.d2\"></p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"pull-right\">\n                    <div class=\"tab-content\" id=\"descCate\">\n                        <div role=\"tabpanel\" class=\"tab-pane fade in active\" id=\"detail-tab\"\n                             aria-labelledby=\"detail-tab\">\n                            <div class=\"descCate-content bgf5\">\n                                <dd class=\"dc-idsItem selected\">\n                                    <a href=\"#desc-module-1\"><i class=\"iconfont icon-dot\"></i> 产品图</a>\n                                </dd>\n                                <dd class=\"dc-idsItem\">\n                                    <a href=\"#desc-module-2\"><i class=\"iconfont icon-selected\"></i> 细节图</a>\n                                </dd>\n                                <dd class=\"dc-idsItem\">\n                                    <a href=\"#desc-module-3\"><i class=\"iconfont\"></i> 尺寸及试穿</a>\n                                </dd>\n                                <dd class=\"dc-idsItem\">\n                                    <a href=\"#desc-module-4\"><i class=\"iconfont\"></i> 模特效果图</a>\n                                </dd>\n                                <dd class=\"dc-idsItem\">\n                                    <a href=\"#desc-module-5\"><i class=\"iconfont\"></i> 常见问题</a>\n                                </dd>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </section>\n        </div>\n        <footer_></footer_>\n    </div>\n</template>\n<script>\n    import \"@/assets/js/jquery.zoom.js\"\n    import \"@/assets/js/jquery.magnifier.js\"\n    import \"@/assets/js/jquery.magnifier.js\"\n    import \"@/assets/js/jquery.zoom.js\"\n    import header_ from '../components/header_'\n    import search from '../components/search'\n    import footer_ from '../components/footer_'\n    import {detail, recommend, addCart} from \"../lib/interface\";\n\n    export default {\n        components: {header_, search, footer_},\n        name: \"detail\",\n        data() {\n            return {\n                id: 0,\n                result: {},\n                recommend: [],\n                firstImg: \"\",\n            }\n        },\n        watch: {\n            $route() {\n                this.id = this.$route.query.id;\n                this.getResult();\n            },\n        },\n        mounted() {\n            this.id = this.$route.query.id;\n            this.getResult();\n            this.getRecommendInfo();\n\n            $('#descCate').smartFloat(0);\n            $('.dc-idsItem').click(function () {\n                $(this).addClass('selected').siblings().removeClass('selected');\n            });\n            $('#item-tabs a[data-toggle=\"tab\"]').on('show.bs.tab', function (e) {\n                $('#descCate #' + $(e.target).attr('aria-controls') + '-tab')\n                    .addClass('in').addClass('active').siblings()\n                    .removeClass('in').removeClass('active');\n            });\n            $('#magnifier').magnifier();\n            $('.vip-price-panel').click(function () {\n                if ($(this).hasClass('active')) {\n                    $('.all-price__box').stop().slideUp('normal', function () {\n                        $('.vip-price-panel').removeClass('active').find('.iconfont').removeClass('icon-up').addClass('icon-down');\n                    });\n                } else {\n                    $(this).addClass('active').find('.iconfont').removeClass('icon-down').addClass('icon-up');\n                    $('.all-price__box').stop().slideDown('normal');\n                }\n            });\n            $('.amount-input').onlyReg({reg: /[^0-9]/g});\n            var that = this;\n            $('.amount-widget').on('click', '.amount-but', function () {\n                var num = parseInt($('.amount-input').val());\n                if (!num) num = 0;\n                if ($(this).hasClass('add')) {\n                    if (num > that.result.stock - 1) {\n                        return DJMask.open({\n                            width: \"300px\",\n                            height: \"100px\",\n                            content: \"您输入的数量超过库存上限\"\n                        });\n                    }\n                    $('.amount-input').val(num + 1);\n                } else if ($(this).hasClass('sub')) {\n                    if (num == 1) {\n                        return DJMask.open({\n                            width: \"300px\",\n                            height: \"100px\",\n                            content: \"您输入的数量有误\"\n                        });\n                    }\n                    $('.amount-input').val(num - 1);\n                }\n            });\n        },\n        methods: {\n            async getResult() {\n                let result = await detail({\"id\": this.id});\n                this.result = result.result;\n                if (result.status === 0) {\n                    this.$router.replace(\"/\");\n                    return;\n                }\n                this.firstImg = this.result.image[0];\n            },\n            async chooseSku(k, k1) {\n                $(\".sku_\" + k).removeClass(\"on\");\n                $(\"#sku_\" + k + \"_\" + k1).addClass(\"on\");\n                var ids = \"\";\n                $(\".sku\").each(function (item) {\n                    if ($(this).hasClass(\"on\")) {\n                        ids += $(this).attr(\"data-value\") + \",\";\n                    }\n                })\n                ids = ids.substr(0, ids.length - 1);\n                var id = 0;\n                for (k in this.result.gids) {\n                    if (k === ids) {\n                        id = this.result.gids[k];\n                    }\n                }\n                this.id = id;\n                this.getResult();\n            },\n            async addCart() {\n                var token = localStorage.getItem(\"token\");\n                if (token === undefined || token === null) {\n                    this.$router.replace({\n                        name: \"login\",\n                        query: {redirect: this.$route.fullPath}\n                    });\n                    return;\n                }\n                var num = parseInt($('.amount-input').val());\n                if (num > this.result.stock) {\n                    this.$Message.error(\"超出最大库存！\");\n                    $('.amount-input').val(0);\n                    return;\n                }\n                let result = await addCart({\"id\": this.id, \"num\": num});\n                this.$Message.success(result.message);\n            },\n            async getRecommendInfo() {\n                let result = await recommend();\n                this.recommend = result.result;\n            },\n            changeImg(img) {\n                this.firstImg = img;\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n"],"sourceRoot":"src/views"}]}