{"remainingRequest":"/Users/yeguofang/www/tp6_vue_10/node_modules/babel-loader/lib/index.js!/Users/yeguofang/www/tp6_vue_10/src/lib/http.js","dependencies":[{"path":"/Users/yeguofang/www/tp6_vue_10/src/lib/http.js","mtime":1579065576000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport iView from \"iview\";\n/*\najax请求函数模块\n返回值: promise对象(返回: response.data)\n */\n\nimport axios from 'axios';\nexport function get(url) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return ajax(url, data, 'GET');\n}\nexport function post(url) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return ajax(url, data, 'POST');\n}\nexport function put(url) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return ajax(url, data, 'PUT');\n}\nexport function ajax(url) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'GET';\n  return new Promise(function (resolve, reject) {\n    iView.Spin.show({\n      render: function render(h) {\n        return h('div', [h('i', {\n          'class': 'demo-spin-icon-load ivu-icon ivu-icon-ios-loading',\n          style: {\n            fontSize: '64px'\n          }\n        }), h('div', \"加载中...\")]);\n      }\n    }); // 执行异步ajax请求\n\n    var promise;\n\n    if (type === 'GET') {\n      // 准备url query参数数据\n      var dataStr = ''; //数据拼接字符串\n\n      Object.keys(data).forEach(function (key) {\n        dataStr += key + '=' + data[key] + '&';\n      });\n\n      if (dataStr !== '') {\n        dataStr = dataStr.substring(0, dataStr.lastIndexOf('&'));\n        url = url + '?' + dataStr;\n      } // 发送get请求\n\n\n      promise = axios.get(url);\n    } else if (type === 'POST') {\n      // 发送post请求\n      promise = axios.post(url, data);\n    } else {\n      promise = axios.put(url, data);\n    }\n\n    promise.then(function (response) {\n      iView.Spin.hide(); // 成功了调用resolve()\n\n      if (response) {\n        resolve(response.data);\n      } else {// alert(\"当前请求的返回值出现错误,请检查！\", \"error\")\n      }\n    }).catch(function (error) {\n      iView.Spin.hide(); //失败了调用reject()\n\n      reject(error);\n    });\n  });\n}",{"version":3,"sources":["/Users/yeguofang/www/tp6_vue_10/src/lib/http.js"],"names":["iView","axios","get","url","data","ajax","post","put","type","Promise","resolve","reject","Spin","show","render","h","style","fontSize","promise","dataStr","Object","keys","forEach","key","substring","lastIndexOf","then","response","hide","catch","error"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA;;;;;AAIA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,SAASC,GAAT,CAAaC,GAAb,EAA6B;AAAA,MAAXC,IAAW,uEAAJ,EAAI;AAChC,SAAOC,IAAI,CAACF,GAAD,EAAMC,IAAN,EAAY,KAAZ,CAAX;AACH;AAED,OAAO,SAASE,IAAT,CAAcH,GAAd,EAA8B;AAAA,MAAXC,IAAW,uEAAJ,EAAI;AACjC,SAAOC,IAAI,CAACF,GAAD,EAAMC,IAAN,EAAY,MAAZ,CAAX;AACH;AAED,OAAO,SAASG,GAAT,CAAaJ,GAAb,EAA6B;AAAA,MAAXC,IAAW,uEAAJ,EAAI;AAChC,SAAOC,IAAI,CAACF,GAAD,EAAMC,IAAN,EAAY,KAAZ,CAAX;AACH;AAED,OAAO,SAASC,IAAT,CAAcF,GAAd,EAA4C;AAAA,MAAzBC,IAAyB,uEAAlB,EAAkB;AAAA,MAAdI,IAAc,uEAAP,KAAO;AAC/C,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCX,IAAAA,KAAK,CAACY,IAAN,CAAWC,IAAX,CAAgB;AACZC,MAAAA,MAAM,EAAE,gBAACC,CAAD,EAAO;AACX,eAAOA,CAAC,CAAC,KAAD,EAAQ,CACZA,CAAC,CAAC,GAAD,EAAM;AACH,mBAAS,mDADN;AAEHC,UAAAA,KAAK,EAAE;AACHC,YAAAA,QAAQ,EAAE;AADP;AAFJ,SAAN,CADW,EAOZF,CAAC,CAAC,KAAD,EAAQ,QAAR,CAPW,CAAR,CAAR;AASH;AAXW,KAAhB,EADoC,CAcpC;;AACA,QAAIG,OAAJ;;AACA,QAAIV,IAAI,KAAK,KAAb,EAAoB;AAChB;AACA,UAAIW,OAAO,GAAG,EAAd,CAFgB,CAEE;;AAClBC,MAAAA,MAAM,CAACC,IAAP,CAAYjB,IAAZ,EAAkBkB,OAAlB,CAA0B,UAAAC,GAAG,EAAI;AAC7BJ,QAAAA,OAAO,IAAII,GAAG,GAAG,GAAN,GAAYnB,IAAI,CAACmB,GAAD,CAAhB,GAAwB,GAAnC;AACH,OAFD;;AAGA,UAAIJ,OAAO,KAAK,EAAhB,EAAoB;AAChBA,QAAAA,OAAO,GAAGA,OAAO,CAACK,SAAR,CAAkB,CAAlB,EAAqBL,OAAO,CAACM,WAAR,CAAoB,GAApB,CAArB,CAAV;AACAtB,QAAAA,GAAG,GAAGA,GAAG,GAAG,GAAN,GAAYgB,OAAlB;AACH,OATe,CAUhB;;;AACAD,MAAAA,OAAO,GAAGjB,KAAK,CAACC,GAAN,CAAUC,GAAV,CAAV;AACH,KAZD,MAYO,IAAIK,IAAI,KAAK,MAAb,EAAqB;AACxB;AACAU,MAAAA,OAAO,GAAGjB,KAAK,CAACK,IAAN,CAAWH,GAAX,EAAgBC,IAAhB,CAAV;AACH,KAHM,MAGA;AACHc,MAAAA,OAAO,GAAGjB,KAAK,CAACM,GAAN,CAAUJ,GAAV,EAAeC,IAAf,CAAV;AACH;;AACDc,IAAAA,OAAO,CAACQ,IAAR,CAAa,UAAUC,QAAV,EAAoB;AAC7B3B,MAAAA,KAAK,CAACY,IAAN,CAAWgB,IAAX,GAD6B,CAE7B;;AACA,UAAID,QAAJ,EAAc;AACVjB,QAAAA,OAAO,CAACiB,QAAQ,CAACvB,IAAV,CAAP;AACH,OAFD,MAEO,CACH;AACH;AACJ,KARD,EAQGyB,KARH,CAQS,UAAUC,KAAV,EAAiB;AACtB9B,MAAAA,KAAK,CAACY,IAAN,CAAWgB,IAAX,GADsB,CAEtB;;AACAjB,MAAAA,MAAM,CAACmB,KAAD,CAAN;AACH,KAZD;AAaH,GA/CM,CAAP;AAgDH","sourcesContent":["import iView from \"iview\"\n/*\najax请求函数模块\n返回值: promise对象(返回: response.data)\n */\nimport axios from 'axios'\n\nexport function get(url, data = {}) {\n    return ajax(url, data, 'GET');\n}\n\nexport function post(url, data = {}) {\n    return ajax(url, data, 'POST');\n}\n\nexport function put(url, data = {}) {\n    return ajax(url, data, 'PUT');\n}\n\nexport function ajax(url, data = {}, type = 'GET') {\n    return new Promise((resolve, reject) => {\n        iView.Spin.show({\n            render: (h) => {\n                return h('div', [\n                    h('i', {\n                        'class': 'demo-spin-icon-load ivu-icon ivu-icon-ios-loading',\n                        style: {\n                            fontSize: '64px'\n                        }\n                    }),\n                    h('div', \"加载中...\")\n                ])\n            }\n        })\n        // 执行异步ajax请求\n        let promise;\n        if (type === 'GET') {\n            // 准备url query参数数据\n            let dataStr = ''; //数据拼接字符串\n            Object.keys(data).forEach(key => {\n                dataStr += key + '=' + data[key] + '&'\n            });\n            if (dataStr !== '') {\n                dataStr = dataStr.substring(0, dataStr.lastIndexOf('&'));\n                url = url + '?' + dataStr\n            }\n            // 发送get请求\n            promise = axios.get(url)\n        } else if (type === 'POST') {\n            // 发送post请求\n            promise = axios.post(url, data)\n        } else {\n            promise = axios.put(url, data)\n        }\n        promise.then(function (response) {\n            iView.Spin.hide()\n            // 成功了调用resolve()\n            if (response) {\n                resolve(response.data)\n            } else {\n                // alert(\"当前请求的返回值出现错误,请检查！\", \"error\")\n            }\n        }).catch(function (error) {\n            iView.Spin.hide()\n            //失败了调用reject()\n            reject(error)\n        })\n    })\n}\n"]}]}