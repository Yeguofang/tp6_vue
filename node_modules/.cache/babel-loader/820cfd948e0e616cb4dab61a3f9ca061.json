{"remainingRequest":"/Users/yeguofang/www/tp6_vue_10/node_modules/babel-loader/lib/index.js!/Users/yeguofang/www/tp6_vue_10/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yeguofang/www/tp6_vue_10/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yeguofang/www/tp6_vue_10/src/views/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yeguofang/www/tp6_vue_10/src/views/login.vue","mtime":1579534261000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/yeguofang/www/tp6_vue_10/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport lvaild from \"../lib/lvalid\";\nimport footer_ from \"../components/footer_\";\nimport { smscode, login as _login } from \"../lib/interface\";\nexport default {\n  name: \"login\",\n  components: {\n    footer_: footer_\n  },\n  data: function data() {\n    return {\n      sendDisabled: false,\n      sendText: \"发送验证码\",\n      phone: \"\",\n      code: \"\",\n      url: \"\"\n    };\n  },\n  mounted: function mounted() {\n    this.url = decodeURIComponent(this.$route.query.redirect); // router.push({path:decodeURIComponent(url)});\n  },\n  methods: {\n    //发送验证码\n    sendCode: function () {\n      var _sendCode = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var that, result, timerNum, timer;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                that = this;\n\n                if (!(this.phone == \"\" || !lvaild.checkMobile(this.phone))) {\n                  _context.next = 4;\n                  break;\n                }\n\n                this.$Message.error('请输入正确的手机号码！');\n                return _context.abrupt(\"return\");\n\n              case 4:\n                _context.next = 6;\n                return smscode({\n                  \"phone_number\": this.phone\n                });\n\n              case 6:\n                result = _context.sent;\n\n                if (!(result.status == 0)) {\n                  _context.next = 12;\n                  break;\n                }\n\n                this.$Message.error(result.message);\n                return _context.abrupt(\"return\");\n\n              case 12:\n                this.$Message.success(result.message);\n                timerNum = 60;\n                this.sendDisabled = true;\n                timer = setInterval(function () {\n                  if (timerNum <= 0) {\n                    that.sendText = \"发送验证码\";\n                    clearInterval(timer);\n                    that.sendDisabled = false;\n                  } else {\n                    that.sendText = timerNum + \"秒后重新获取\";\n                    timerNum--;\n                  }\n                }, 1000);\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function sendCode() {\n        return _sendCode.apply(this, arguments);\n      }\n\n      return sendCode;\n    }(),\n    login: function () {\n      var _login2 = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var result;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(this.phone == \"\")) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                this.$Message.error('请输入正确的手机号码！');\n                return _context2.abrupt(\"return\");\n\n              case 3:\n                if (!(this.code == \"\")) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                this.$Message.error('请输入短信验证码！');\n                return _context2.abrupt(\"return\");\n\n              case 6:\n                _context2.next = 8;\n                return _login({\n                  \"phone_number\": this.phone,\n                  \"code\": this.code,\n                  \"type\": 2\n                });\n\n              case 8:\n                result = _context2.sent;\n\n                if (!(result.status == 1)) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                localStorage.setItem(\"token\", result.result.token);\n                localStorage.setItem(\"username\", result.result.username);\n\n                if (this.url == \"undefined\") {\n                  this.$router.replace(\"/\");\n                } else {\n                  this.$router.replace(this.url);\n                }\n\n                _context2.next = 17;\n                break;\n\n              case 15:\n                this.$Message.error(result.message);\n                return _context2.abrupt(\"return\");\n\n              case 17:\n                console.log(result); // this.$Message.success(result.msg);\n                // console.log(result);\n\n              case 18:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function login() {\n        return _login2.apply(this, arguments);\n      }\n\n      return login;\n    }()\n  }\n};",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA,OAAA,MAAA;AACA,OAAA,OAAA;AACA,SAAA,OAAA,EAAA,KAAA,IAAA,MAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA,OAAA,EAAA;AAAA,GAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA,OAFA;AAGA,MAAA,KAAA,EAAA,EAHA;AAIA,MAAA,IAAA,EAAA,EAJA;AAKA,MAAA,GAAA,EAAA;AALA,KAAA;AAOA,GAXA;AAYA,EAAA,OAZA,qBAYA;AACA,SAAA,GAAA,GAAA,kBAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,QAAA,CAAA,CADA,CAEA;AACA,GAfA;AAgBA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,QAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,gBAAA,IAHA,GAGA,IAHA;;AAAA,sBAIA,KAAA,KAAA,IAAA,EAAA,IAAA,CAAA,MAAA,CAAA,WAAA,CAAA,KAAA,KAAA,CAJA;AAAA;AAAA;AAAA;;AAKA,qBAAA,QAAA,CAAA,KAAA,CAAA,aAAA;AALA;;AAAA;AAAA;AAAA,uBAQA,OAAA,CAAA;AAAA,kCAAA,KAAA;AAAA,iBAAA,CARA;;AAAA;AAQA,gBAAA,MARA;;AAAA,sBASA,MAAA,CAAA,MAAA,IAAA,CATA;AAAA;AAAA;AAAA;;AAUA,qBAAA,QAAA,CAAA,KAAA,CAAA,MAAA,CAAA,OAAA;AAVA;;AAAA;AAaA,qBAAA,QAAA,CAAA,OAAA,CAAA,MAAA,CAAA,OAAA;AACA,gBAAA,QAdA,GAcA,EAdA;AAeA,qBAAA,YAAA,GAAA,IAAA;AACA,gBAAA,KAhBA,GAgBA,WAAA,CAAA,YAAA;AACA,sBAAA,QAAA,IAAA,CAAA,EAAA;AACA,oBAAA,IAAA,CAAA,QAAA,GAAA,OAAA;AACA,oBAAA,aAAA,CAAA,KAAA,CAAA;AACA,oBAAA,IAAA,CAAA,YAAA,GAAA,KAAA;AACA,mBAJA,MAIA;AACA,oBAAA,IAAA,CAAA,QAAA,GAAA,QAAA,GAAA,QAAA;AACA,oBAAA,QAAA;AACA;AACA,iBATA,EASA,IATA,CAhBA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA4BA,IAAA,KA5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBA6BA,KAAA,KAAA,IAAA,EA7BA;AAAA;AAAA;AAAA;;AA8BA,qBAAA,QAAA,CAAA,KAAA,CAAA,aAAA;AA9BA;;AAAA;AAAA,sBAiCA,KAAA,IAAA,IAAA,EAjCA;AAAA;AAAA;AAAA;;AAkCA,qBAAA,QAAA,CAAA,KAAA,CAAA,WAAA;AAlCA;;AAAA;AAAA;AAAA,uBAqCA,MAAA,CAAA;AAAA,kCAAA,KAAA,KAAA;AAAA,0BAAA,KAAA,IAAA;AAAA,0BAAA;AAAA,iBAAA,CArCA;;AAAA;AAqCA,gBAAA,MArCA;;AAAA,sBAsCA,MAAA,CAAA,MAAA,IAAA,CAtCA;AAAA;AAAA;AAAA;;AAuCA,gBAAA,YAAA,CAAA,OAAA,CAAA,OAAA,EAAA,MAAA,CAAA,MAAA,CAAA,KAAA;AACA,gBAAA,YAAA,CAAA,OAAA,CAAA,UAAA,EAAA,MAAA,CAAA,MAAA,CAAA,QAAA;;AACA,oBAAA,KAAA,GAAA,IAAA,WAAA,EAAA;AACA,uBAAA,OAAA,CAAA,OAAA,CAAA,GAAA;AACA,iBAFA,MAEA;AACA,uBAAA,OAAA,CAAA,OAAA,CAAA,KAAA,GAAA;AACA;;AA7CA;AAAA;;AAAA;AA+CA,qBAAA,QAAA,CAAA,KAAA,CAAA,MAAA,CAAA,OAAA;AA/CA;;AAAA;AAkDA,gBAAA,OAAA,CAAA,GAAA,CAAA,MAAA,EAlDA,CAmDA;AACA;;AApDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAhBA,CAAA","sourcesContent":["<template>\n    <div>\n        <div class=\"public-head-layout container\">\n            <router-link class=\"logo\" to=\"/\"><img src=\"@/assets/images/icons/logo.jpg\" alt=\"TP6\" class=\"cover\">\n            </router-link>\n        </div>\n        <div class=\"con\">\n            <div class=\"login-layout container\">\n                <div class=\"form-box login\">\n                    <div class=\"tabs-nav\">\n                        <h2>欢迎登录singwa商城</h2>\n                    </div>\n                    <div class=\"tabs_container\">\n                        <form class=\"tabs_form\" action=\"\" method=\"post\" id=\"login_form\">\n                            <div class=\"form-group\">\n                                <div class=\"input-group\">\n                                    <div class=\"input-group-addon\">\n                                        <span class=\"glyphicon glyphicon-phone\" aria-hidden=\"true\"></span>\n                                    </div>\n                                    <input class=\"form-control phone\" name=\"phone\" v-model=\"phone\"\n                                           placeholder=\"手机号\" maxlength=\"11\" autocomplete=\"off\" type=\"text\">\n                                </div>\n                            </div>\n                            <div class=\"form-group\">\n                                <div class=\"input-group\">\n                                    <div class=\"input-group-addon\">\n                                        <span class=\"glyphicon glyphicon-lock\" aria-hidden=\"true\"></span>\n                                    </div>\n                                    <input class=\"form-control password\" v-model=\"code\" name=\"password\"\n                                           placeholder=\"请输入验证码\" autocomplete=\"off\" type=\"text\">\n                                    <div v-if=\"!sendDisabled\" v-text=\"sendText\" class=\"input-group-addon pwd-toggle\"\n                                         title=\"发送验证码\"\n                                         @click=\"sendCode\">\n                                    </div>\n                                    <div v-if=\"sendDisabled\" v-text=\"sendText\" class=\"input-group-addon pwd-toggle\"\n                                         title=\"发送验证码\">\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"checkbox\">\n                                <label>\n                                    <input checked=\"\" id=\"login_checkbox\" type=\"checkbox\"><i></i> 30天内免登录\n                                </label>\n                            </div>\n                            <!-- 错误信息 -->\n                            <div class=\"form-group\">\n                                <div class=\"error_msg\" id=\"login_error\">\n                                </div>\n                            </div>\n                            <button class=\"btn btn-large btn-primary btn-lg btn-block submit\" id=\"login_submit\"\n                                    type=\"button\" @click=\"login\">登录\n                            </button>\n                            <br>\n                        </form>\n                        <div class=\"tabs_div\">\n                            <div class=\"success-box\">\n                                <div class=\"success-msg\">\n                                    <i class=\"success-icon\"></i>\n                                    <p class=\"success-text\">登录成功</p>\n                                </div>\n                            </div>\n                            <div class=\"option-box\">\n                                <div class=\"buts-title\">\n                                    现在您可以\n                                </div>\n                                <div class=\"buts-box\">\n                                    <a role=\"button\" href=\"/\"\n                                       class=\"btn btn-block btn-lg btn-default\">继续访问商城</a>\n                                    <a role=\"button\" href=\"udai_welcome.html\" class=\"btn btn-block btn-lg btn-info\">登录会员中心</a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <footer_></footer_>\n    </div>\n</template>\n\n<script>\n    import lvaild from '../lib/lvalid'\n    import footer_ from '../components/footer_'\n    import {smscode, login} from \"../lib/interface\";\n\n    export default {\n        name: \"login\",\n        components: {footer_},\n        data() {\n            return {\n                sendDisabled: false,\n                sendText: \"发送验证码\",\n                phone: \"\",\n                code: \"\",\n                url: \"\",\n            }\n        },\n        mounted() {\n            this.url = decodeURIComponent(this.$route.query.redirect);\n            // router.push({path:decodeURIComponent(url)});\n        },\n        methods: {\n            //发送验证码\n            async sendCode() {\n                var that = this;\n                if (this.phone == \"\" || !lvaild.checkMobile(this.phone)) {\n                    this.$Message.error('请输入正确的手机号码！');\n                    return;\n                }\n                let result = await smscode({\"phone_number\": this.phone});\n                if (result.status == 0) {\n                    this.$Message.error(result.message);\n                    return;\n                } else {\n                    this.$Message.success(result.message);\n                    let timerNum = 60;\n                    this.sendDisabled = true;\n                    let timer = setInterval(function () {\n                        if (timerNum <= 0) {\n                            that.sendText = \"发送验证码\";\n                            clearInterval(timer);\n                            that.sendDisabled = false;\n                        } else {\n                            that.sendText = timerNum + \"秒后重新获取\";\n                            timerNum--;\n                        }\n                    }, 1000);\n                }\n            },\n            async login() {\n                if (this.phone == \"\") {\n                    this.$Message.error('请输入正确的手机号码！');\n                    return;\n                }\n                if (this.code == \"\") {\n                    this.$Message.error('请输入短信验证码！');\n                    return;\n                }\n                let result = await login({\"phone_number\": this.phone, \"code\": this.code, \"type\": 2});\n                if (result.status == 1) {\n                    localStorage.setItem(\"token\", result.result.token);\n                    localStorage.setItem(\"username\", result.result.username);\n                    if (this.url == \"undefined\") {\n                        this.$router.replace(\"/\");\n                    } else {\n                        this.$router.replace(this.url);\n                    }\n                } else {\n                    this.$Message.error(result.message);\n                    return;\n                }\n                console.log(result);\n                // this.$Message.success(result.msg);\n                // console.log(result);\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .con {\n        background: url(https://img10.360buyimg.com/cms/jfs/t1/93644/17/2153/575179/5dcb5129E5b2f2bed/ae22122812cedc5c.jpg) no-repeat center center;\n        /*background: #b31e22;*/\n    }\n\n    * {\n        /*font-family: 'Microsoft Yahei';*/\n    }\n\n    .public-head-layout {\n        height: 120px;\n        position: relative;\n    }\n\n    .logo {\n        width: 200px;\n        height: 100px;\n        display: block;\n        position: absolute;\n        bottom: 0;\n        left: 50px;\n    }\n\n    .login-layout {\n        height: 450px;\n        position: relative;\n    }\n\n    .form-box {\n        width: 340px;\n        min-height: 340px;\n        padding: 25px 20px;\n        position: absolute;\n        right: 100px;\n        top: 20px;\n        background-color: #fff;\n        border-radius: 5px;\n        -webkit-box-shadow: 0 15px 35px -25px #b31e22;\n        -moz-box-shadow: 0 15px 35px -25px #b31e22;\n        box-shadow: 0 15px 35px -25px #b31e22;\n    }\n\n    .tabs_div {\n        display: none;\n    }\n\n    .tabs-nav h2 {\n        font-size: 18px;\n        margin-top: 0;\n        padding: 10px 0;\n        margin-bottom: 15px;\n        border-bottom: 1px solid #e0e0e0;\n    }\n\n    .success-box {\n        width: 100%;\n        height: 160px;\n        position: relative;\n    }\n\n    .success-msg {\n        height: 96px;\n        text-align: center;\n        position: absolute;\n        margin: auto;\n        left: 0;\n        right: 0;\n        top: 0;\n        bottom: 0;\n    }\n\n    .success-icon {\n        width: 64px;\n        height: 64px;\n        display: inline-block;\n        background-image: url(../assets/images/icons/success.png);\n    }\n\n    .success-text {\n        text-align: center;\n        font-size: 16px;\n        line-height: 32px;\n        height: 32px;\n        margin-bottom: 0;\n    }\n\n    .buts-title {\n        color: #999;\n        font-size: 16px;\n        margin-bottom: 10px;\n    }\n\n    .footer-login {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        margin-top: 200px;\n        border-top: 1px solid #e0e0e0;\n    }\n\n    .links {\n        margin-top: 10px;\n        display: -webkit-flex;\n        display: flex;\n        flex-flow: row wrap;\n        justify-content: center;\n    }\n\n    .links li {\n        color: #333;\n        min-width: 80px;\n        text-align: center;\n        margin: 10px 20px 0;\n    }\n\n    .copyright {\n        color: #666;\n        text-align: center;\n        line-height: 2em;\n    }\n</style>\n"],"sourceRoot":"src/views"}]}