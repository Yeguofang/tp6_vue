{"remainingRequest":"/Users/yeguofang/www/tp6_vue_10/node_modules/babel-loader/lib/index.js!/Users/yeguofang/www/tp6_vue_10/src/assets/js/jquery.zoom.js","dependencies":[{"path":"/Users/yeguofang/www/tp6_vue_10/src/assets/js/jquery.zoom.js","mtime":1521879550000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yeguofang/www/tp6_vue_10/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n+function ($) {\n  \"use strict\";\n  /**\n   * The zoom service\n   */\n\n  function ZoomService() {\n    this._activeZoom = this._initialScrollPosition = this._initialTouchPosition = this._touchMoveListener = null;\n    this._$document = $(document);\n    this._$window = $(window);\n    this._$body = $(document.body);\n    this._boundClick = $.proxy(this._clickHandler, this);\n  }\n\n  ZoomService.prototype.listen = function () {\n    this._$body.on('click', '[data-action=\"zoom\"]', $.proxy(this._zoom, this));\n  };\n\n  ZoomService.prototype._zoom = function (e) {\n    var target = e.target;\n    if (!target || target.tagName != 'IMG') return;\n    if (this._$body.hasClass('zoom-overlay-open')) return;\n\n    if (e.metaKey || e.ctrlKey) {\n      return window.open(e.target.getAttribute('data-original') || e.target.src, '_blank');\n    }\n\n    if (target.width >= $(window).width() - Zoom.OFFSET) return;\n\n    this._activeZoomClose(true);\n\n    this._activeZoom = new Zoom(target);\n\n    this._activeZoom.zoomImage(); // todo(fat): probably worth throttling this\n\n\n    this._$window.on('scroll.zoom', $.proxy(this._scrollHandler, this));\n\n    this._$document.on('keyup.zoom', $.proxy(this._keyHandler, this));\n\n    this._$document.on('touchstart.zoom', $.proxy(this._touchStart, this)); // we use a capturing phase here to prevent unintended js events\n    // sadly no useCapture in jquery api (http://bugs.jquery.com/ticket/14953)\n\n\n    if (document.addEventListener) {\n      document.addEventListener('click', this._boundClick, true);\n    } else {\n      document.attachEvent('onclick', this._boundClick, true);\n    }\n\n    if ('bubbles' in e) {\n      if (e.bubbles) e.stopPropagation();\n    } else {\n      // Internet Explorer before version 9\n      e.cancelBubble = true;\n    }\n  };\n\n  ZoomService.prototype._activeZoomClose = function (forceDispose) {\n    if (!this._activeZoom) return;\n\n    if (forceDispose) {\n      this._activeZoom.dispose();\n    } else {\n      this._activeZoom.close();\n    }\n\n    this._$window.off('.zoom');\n\n    this._$document.off('.zoom');\n\n    document.removeEventListener('click', this._boundClick, true);\n    this._activeZoom = null;\n  };\n\n  ZoomService.prototype._scrollHandler = function (e) {\n    if (this._initialScrollPosition === null) this._initialScrollPosition = $(window).scrollTop();\n    var deltaY = this._initialScrollPosition - $(window).scrollTop();\n    if (Math.abs(deltaY) >= 40) this._activeZoomClose();\n  };\n\n  ZoomService.prototype._keyHandler = function (e) {\n    if (e.keyCode == 27) this._activeZoomClose();\n  };\n\n  ZoomService.prototype._clickHandler = function (e) {\n    if (e.preventDefault) e.preventDefault();else event.returnValue = false;\n\n    if ('bubbles' in e) {\n      if (e.bubbles) e.stopPropagation();\n    } else {\n      // Internet Explorer before version 9\n      e.cancelBubble = true;\n    }\n\n    this._activeZoomClose();\n  };\n\n  ZoomService.prototype._touchStart = function (e) {\n    this._initialTouchPosition = e.touches[0].pageY;\n    $(e.target).on('touchmove.zoom', $.proxy(this._touchMove, this));\n  };\n\n  ZoomService.prototype._touchMove = function (e) {\n    if (Math.abs(e.touches[0].pageY - this._initialTouchPosition) > 10) {\n      this._activeZoomClose();\n\n      $(e.target).off('touchmove.zoom');\n    }\n  };\n  /**\n   * The zoom object\n   */\n\n\n  function Zoom(img) {\n    this._fullHeight = this._fullWidth = this._overlay = this._targetImageWrap = null;\n    this._targetImage = img;\n    this._$body = $(document.body);\n  }\n\n  Zoom.OFFSET = 80;\n  Zoom._MAX_WIDTH = 2560;\n  Zoom._MAX_HEIGHT = 4096;\n\n  Zoom.prototype.zoomImage = function () {\n    var img = document.createElement('img');\n    img.src = $(this._targetImage).data('src');\n    img.onload = $.proxy(function () {\n      this._targetImage.src = $(this._targetImage).data('src');\n      this._fullHeight = Number(img.height);\n      this._fullWidth = Number(img.width);\n\n      this._zoomOriginal();\n    }, this);\n  };\n\n  Zoom.prototype._zoomOriginal = function () {\n    this._targetImageWrap = document.createElement('div');\n    this._targetImageWrap.className = 'zoom-img-wrap';\n\n    this._targetImage.parentNode.insertBefore(this._targetImageWrap, this._targetImage);\n\n    this._targetImageWrap.appendChild(this._targetImage);\n\n    $(this._targetImage).addClass('zoom-img').attr('data-action', 'zoom-out');\n    this._overlay = document.createElement('div');\n    this._overlay.className = 'zoom-overlay';\n    document.body.appendChild(this._overlay);\n\n    this._calculateZoom();\n\n    this._triggerAnimation();\n  };\n\n  Zoom.prototype._calculateZoom = function () {\n    this._targetImage.offsetWidth; // repaint before animating\n\n    var originalFullImageWidth = this._fullWidth;\n    var originalFullImageHeight = this._fullHeight;\n    var scrollTop = $(window).scrollTop();\n    var maxScaleFactor = originalFullImageWidth / this._targetImage.width;\n    var viewportHeight = $(window).height() - Zoom.OFFSET;\n    var viewportWidth = $(window).width() - Zoom.OFFSET;\n    var imageAspectRatio = originalFullImageWidth / originalFullImageHeight;\n    var viewportAspectRatio = viewportWidth / viewportHeight;\n\n    if (originalFullImageWidth < viewportWidth && originalFullImageHeight < viewportHeight) {\n      this._imgScaleFactor = maxScaleFactor;\n    } else if (imageAspectRatio < viewportAspectRatio) {\n      this._imgScaleFactor = viewportHeight / originalFullImageHeight * maxScaleFactor;\n    } else {\n      this._imgScaleFactor = viewportWidth / originalFullImageWidth * maxScaleFactor;\n    }\n  };\n\n  Zoom.prototype._triggerAnimation = function () {\n    this._targetImage.offsetWidth; // repaint before animating\n\n    var imageOffset = $(this._targetImage).offset();\n    var scrollTop = $(window).scrollTop();\n    var viewportY = scrollTop + $(window).height() / 2;\n    var viewportX = $(window).width() / 2;\n    var imageCenterY = imageOffset.top + this._targetImage.height / 2;\n    var imageCenterX = imageOffset.left + this._targetImage.width / 2;\n    this._translateY = viewportY - imageCenterY;\n    this._translateX = viewportX - imageCenterX;\n    var targetTransform = 'scale(' + this._imgScaleFactor + ')';\n    var imageWrapTransform = 'translate(' + this._translateX + 'px, ' + this._translateY + 'px)';\n\n    if ($.support.transition) {\n      imageWrapTransform += ' translateZ(0)';\n    }\n\n    $(this._targetImage).css({\n      '-webkit-transform': targetTransform,\n      '-ms-transform': targetTransform,\n      'transform': targetTransform\n    });\n    $(this._targetImageWrap).css({\n      '-webkit-transform': imageWrapTransform,\n      '-ms-transform': imageWrapTransform,\n      'transform': imageWrapTransform\n    });\n\n    this._$body.addClass('zoom-overlay-open');\n  };\n\n  Zoom.prototype.close = function () {\n    this._$body.removeClass('zoom-overlay-open').addClass('zoom-overlay-transitioning'); // we use setStyle here so that the correct vender prefix for transform is used\n\n\n    $(this._targetImage).css({\n      '-webkit-transform': '',\n      '-ms-transform': '',\n      'transform': ''\n    });\n    $(this._targetImageWrap).css({\n      '-webkit-transform': '',\n      '-ms-transform': '',\n      'transform': ''\n    });\n\n    if (!$.support.transition) {\n      return this.dispose();\n    }\n\n    $(this._targetImage).one($.support.transition.end, $.proxy(this.dispose, this)).emulateTransitionEnd(300);\n  };\n\n  Zoom.prototype.dispose = function () {\n    if (this._targetImageWrap && this._targetImageWrap.parentNode) {\n      $(this._targetImage).removeClass('zoom-img').attr('data-action', 'zoom');\n\n      this._targetImageWrap.parentNode.replaceChild(this._targetImage, this._targetImageWrap);\n\n      this._overlay.parentNode.removeChild(this._overlay);\n\n      this._$body.removeClass('zoom-overlay-transitioning');\n    }\n  }; // wait for dom ready (incase script included before body)\n\n\n  $(function () {\n    new ZoomService().listen();\n  });\n}(jQuery);",{"version":3,"sources":["/Users/yeguofang/www/tp6_vue_10/src/assets/js/jquery.zoom.js"],"names":["$","ZoomService","_activeZoom","_initialScrollPosition","_initialTouchPosition","_touchMoveListener","_$document","document","_$window","window","_$body","body","_boundClick","proxy","_clickHandler","prototype","listen","on","_zoom","e","target","tagName","hasClass","metaKey","ctrlKey","open","getAttribute","src","width","Zoom","OFFSET","_activeZoomClose","zoomImage","_scrollHandler","_keyHandler","_touchStart","addEventListener","attachEvent","bubbles","stopPropagation","cancelBubble","forceDispose","dispose","close","off","removeEventListener","scrollTop","deltaY","Math","abs","keyCode","preventDefault","event","returnValue","touches","pageY","_touchMove","img","_fullHeight","_fullWidth","_overlay","_targetImageWrap","_targetImage","_MAX_WIDTH","_MAX_HEIGHT","createElement","data","onload","Number","height","_zoomOriginal","className","parentNode","insertBefore","appendChild","addClass","attr","_calculateZoom","_triggerAnimation","offsetWidth","originalFullImageWidth","originalFullImageHeight","maxScaleFactor","viewportHeight","viewportWidth","imageAspectRatio","viewportAspectRatio","_imgScaleFactor","imageOffset","offset","viewportY","viewportX","imageCenterY","top","imageCenterX","left","_translateY","_translateX","targetTransform","imageWrapTransform","support","transition","css","removeClass","one","end","emulateTransitionEnd","replaceChild","removeChild","jQuery"],"mappings":"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","sourcesContent":["+function ($) { \"use strict\";\n\n  /**\n   * The zoom service\n   */\n  function ZoomService () {\n    this._activeZoom            =\n    this._initialScrollPosition =\n    this._initialTouchPosition  =\n    this._touchMoveListener     = null\n\n    this._$document = $(document)\n    this._$window   = $(window)\n    this._$body     = $(document.body)\n\n    this._boundClick = $.proxy(this._clickHandler, this)\n  }\n\n  ZoomService.prototype.listen = function () {\n    this._$body.on('click', '[data-action=\"zoom\"]', $.proxy(this._zoom, this))\n  }\n\n  ZoomService.prototype._zoom = function (e) {\n    var target = e.target\n\n    if (!target || target.tagName != 'IMG') return\n\n    if (this._$body.hasClass('zoom-overlay-open')) return\n\n    if (e.metaKey || e.ctrlKey) {\n      return window.open((e.target.getAttribute('data-original') || e.target.src), '_blank')\n    }\n\n    if (target.width >= ($(window).width() - Zoom.OFFSET)) return\n\n    this._activeZoomClose(true)\n\n    this._activeZoom = new Zoom(target)\n    this._activeZoom.zoomImage()\n\n    // todo(fat): probably worth throttling this\n    this._$window.on('scroll.zoom', $.proxy(this._scrollHandler, this))\n\n    this._$document.on('keyup.zoom', $.proxy(this._keyHandler, this))\n    this._$document.on('touchstart.zoom', $.proxy(this._touchStart, this))\n\n    // we use a capturing phase here to prevent unintended js events\n    // sadly no useCapture in jquery api (http://bugs.jquery.com/ticket/14953)\n    if (document.addEventListener) {\n      document.addEventListener('click', this._boundClick, true)\n    } else {\n      document.attachEvent('onclick', this._boundClick, true)\n    }\n\n    if ('bubbles' in e) {\n      if (e.bubbles) e.stopPropagation()\n    } else {\n      // Internet Explorer before version 9\n      e.cancelBubble = true\n    }\n  }\n\n  ZoomService.prototype._activeZoomClose = function (forceDispose) {\n    if (!this._activeZoom) return\n\n    if (forceDispose) {\n      this._activeZoom.dispose()\n    } else {\n      this._activeZoom.close()\n    }\n\n    this._$window.off('.zoom')\n    this._$document.off('.zoom')\n\n    document.removeEventListener('click', this._boundClick, true)\n\n    this._activeZoom = null\n  }\n\n  ZoomService.prototype._scrollHandler = function (e) {\n    if (this._initialScrollPosition === null) this._initialScrollPosition = $(window).scrollTop()\n    var deltaY = this._initialScrollPosition - $(window).scrollTop()\n    if (Math.abs(deltaY) >= 40) this._activeZoomClose()\n  }\n\n  ZoomService.prototype._keyHandler = function (e) {\n    if (e.keyCode == 27) this._activeZoomClose()\n  }\n\n  ZoomService.prototype._clickHandler = function (e) {\n    if (e.preventDefault) e.preventDefault()\n    else event.returnValue = false\n\n    if ('bubbles' in e) {\n      if (e.bubbles) e.stopPropagation()\n    } else {\n      // Internet Explorer before version 9\n      e.cancelBubble = true\n    }\n\n    this._activeZoomClose()\n  }\n\n  ZoomService.prototype._touchStart = function (e) {\n    this._initialTouchPosition = e.touches[0].pageY\n    $(e.target).on('touchmove.zoom', $.proxy(this._touchMove, this))\n  }\n\n  ZoomService.prototype._touchMove = function (e) {\n    if (Math.abs(e.touches[0].pageY - this._initialTouchPosition) > 10) {\n      this._activeZoomClose()\n      $(e.target).off('touchmove.zoom')\n    }\n  }\n\n\n  /**\n   * The zoom object\n   */\n  function Zoom (img) {\n    this._fullHeight      =\n    this._fullWidth       =\n    this._overlay         =\n    this._targetImageWrap = null\n\n    this._targetImage = img\n    this._$body = $(document.body)\n  }\n\n  Zoom.OFFSET = 80\n  Zoom._MAX_WIDTH = 2560\n  Zoom._MAX_HEIGHT = 4096\n\n  Zoom.prototype.zoomImage = function () {\n    var img = document.createElement('img')\n    img.src = $(this._targetImage).data('src')\n    img.onload = $.proxy(function () {\n      this._targetImage.src = $(this._targetImage).data('src')\n      this._fullHeight = Number(img.height)\n      this._fullWidth = Number(img.width)\n      this._zoomOriginal()\n    }, this)\n  }\n\n  Zoom.prototype._zoomOriginal = function () {\n    this._targetImageWrap           = document.createElement('div')\n    this._targetImageWrap.className = 'zoom-img-wrap'\n\n    this._targetImage.parentNode.insertBefore(this._targetImageWrap, this._targetImage)\n    this._targetImageWrap.appendChild(this._targetImage)\n\n    $(this._targetImage)\n      .addClass('zoom-img')\n      .attr('data-action', 'zoom-out')\n\n    this._overlay           = document.createElement('div')\n    this._overlay.className = 'zoom-overlay'\n\n    document.body.appendChild(this._overlay)\n\n    this._calculateZoom()\n    this._triggerAnimation()\n  }\n\n  Zoom.prototype._calculateZoom = function () {\n    this._targetImage.offsetWidth // repaint before animating\n\n    var originalFullImageWidth  = this._fullWidth\n    var originalFullImageHeight = this._fullHeight\n\n    var scrollTop = $(window).scrollTop()\n\n    var maxScaleFactor = originalFullImageWidth / this._targetImage.width\n\n    var viewportHeight = ($(window).height() - Zoom.OFFSET)\n    var viewportWidth  = ($(window).width() - Zoom.OFFSET)\n\n    var imageAspectRatio    = originalFullImageWidth / originalFullImageHeight\n    var viewportAspectRatio = viewportWidth / viewportHeight\n\n    if (originalFullImageWidth < viewportWidth && originalFullImageHeight < viewportHeight) {\n      this._imgScaleFactor = maxScaleFactor\n\n    } else if (imageAspectRatio < viewportAspectRatio) {\n      this._imgScaleFactor = (viewportHeight / originalFullImageHeight) * maxScaleFactor\n\n    } else {\n      this._imgScaleFactor = (viewportWidth / originalFullImageWidth) * maxScaleFactor\n    }\n  }\n\n  Zoom.prototype._triggerAnimation = function () {\n    this._targetImage.offsetWidth // repaint before animating\n\n    var imageOffset = $(this._targetImage).offset()\n    var scrollTop   = $(window).scrollTop()\n\n    var viewportY = scrollTop + ($(window).height() / 2)\n    var viewportX = ($(window).width() / 2)\n\n    var imageCenterY = imageOffset.top + (this._targetImage.height / 2)\n    var imageCenterX = imageOffset.left + (this._targetImage.width / 2)\n\n    this._translateY = viewportY - imageCenterY\n    this._translateX = viewportX - imageCenterX\n\n    var targetTransform = 'scale(' + this._imgScaleFactor + ')'\n    var imageWrapTransform = 'translate(' + this._translateX + 'px, ' + this._translateY + 'px)'\n\n    if ($.support.transition) {\n      imageWrapTransform += ' translateZ(0)'\n    }\n\n    $(this._targetImage)\n      .css({\n        '-webkit-transform': targetTransform,\n            '-ms-transform': targetTransform,\n                'transform': targetTransform\n      })\n\n    $(this._targetImageWrap)\n      .css({\n        '-webkit-transform': imageWrapTransform,\n            '-ms-transform': imageWrapTransform,\n                'transform': imageWrapTransform\n      })\n\n    this._$body.addClass('zoom-overlay-open')\n  }\n\n  Zoom.prototype.close = function () {\n    this._$body\n      .removeClass('zoom-overlay-open')\n      .addClass('zoom-overlay-transitioning')\n\n    // we use setStyle here so that the correct vender prefix for transform is used\n    $(this._targetImage)\n      .css({\n        '-webkit-transform': '',\n            '-ms-transform': '',\n                'transform': ''\n      })\n\n    $(this._targetImageWrap)\n      .css({\n        '-webkit-transform': '',\n            '-ms-transform': '',\n                'transform': ''\n      })\n\n    if (!$.support.transition) {\n      return this.dispose()\n    }\n\n    $(this._targetImage)\n      .one($.support.transition.end, $.proxy(this.dispose, this))\n      .emulateTransitionEnd(300)\n  }\n\n  Zoom.prototype.dispose = function () {\n    if (this._targetImageWrap && this._targetImageWrap.parentNode) {\n      $(this._targetImage)\n        .removeClass('zoom-img')\n        .attr('data-action', 'zoom')\n\n      this._targetImageWrap.parentNode.replaceChild(this._targetImage, this._targetImageWrap)\n      this._overlay.parentNode.removeChild(this._overlay)\n\n      this._$body.removeClass('zoom-overlay-transitioning')\n    }\n  }\n\n  // wait for dom ready (incase script included before body)\n  $(function () {\n    new ZoomService().listen()\n  })\n\n}(jQuery)\n"]}]}